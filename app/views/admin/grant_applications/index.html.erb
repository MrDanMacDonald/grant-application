<h3>Welcome</h3>

<table class="table table-hover" id="datatable">
  <thead>
    <tr>
      <th>Date of Application</th>
      <th>ID</th>
      <th>Username</th>
      <th>Request Amount</th>
      <th>Status</th>
      <th>Rating</th>
      <th>Attachment</th>
    </tr>
  </thead>

  <tbody>
    <% @grant_applications.each do |g| %>
    
      <tr class="clickableRow applicationsTable" href="/admin/grant_applications/<%=g.id%>/edit">
        <td><%= g.created_at.strftime('%Y-%m-%d') %></td>
        <td><%= g.id %></td>

        <td>
          <% if g.user.username %>
            <%= g.user.username %>
          <% else %>
            <%= g.user.email %>
          <% end %>
        </td>

        <td><%= g.request_amount %></td>
        <td><%= g.status %></td>
        <td><%= g.rating %></td>
        <!-- File button -->
        <% if g.attachment_url != nil %>
          <td style="padding: 1px;"><%= button_to g.attachment_url, {class: "btn btn-small", method: :get} do %>
           File <i class="icon-paperclip"></i>
            <% end %>
          </td>
        <% else %>
          <td>No attachment</td>
        <% end %>
  
      </tr>
    <% end %>
  </tbody>
</table>

<script type="text/javascript">
  $('.applicationsTable').click(function() {
    // row was clicked
    console.log("sup world");
    window.location = $(this).attr("href");
  });

  $('.applicationsTable').hover(function() {
        $(this).css('cursor','hand');
    });
  $(".applicationsTable a").click( function(event) {
    event.stopPropagation();
  } );

</script>
